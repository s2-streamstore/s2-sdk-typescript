<!DOCTYPE html><html class="default" lang="en" data-base="./"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>@s2-dev/streamstore - v0.22.2</title><meta name="description" content="Documentation for @s2-dev/streamstore"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script defer src="assets/main.js"></script><script async src="assets/icons.js" id="tsd-icons-script"></script><script async src="assets/search.js" id="tsd-search-script"></script><script async src="assets/navigation.js" id="tsd-nav-script"></script><script async src="assets/hierarchy.js" id="tsd-hierarchy-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => window.app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><a href="index.html" class="title">@s2-dev/streamstore - v0.22.2</a><div id="tsd-toolbar-links"></div><button id="tsd-search-trigger" class="tsd-widget" aria-label="Search"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-search"></use></svg></button><dialog id="tsd-search" aria-label="Search"><input role="combobox" id="tsd-search-input" aria-controls="tsd-search-results" aria-autocomplete="list" aria-expanded="true" autocapitalize="off" autocomplete="off" placeholder="Search the docs" maxLength="100"/><ul role="listbox" id="tsd-search-results"></ul><div id="tsd-search-status" aria-live="polite" aria-atomic="true"><div>Preparing search index...</div></div></dialog><a href="#" class="tsd-widget menu" id="tsd-toolbar-menu-trigger" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-menu"></use></svg></a></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><h1>@s2-dev/streamstore - v0.22.2</h1></div><div class="tsd-panel tsd-typography"><div align="center">
  <p>
    <!-- Light mode logo -->
    <a href="https://s2.dev#gh-light-mode-only">
      <img src="https://raw.githubusercontent.com/s2-streamstore/s2-sdk-rust/main/assets/s2-black.png" height="60">
    </a>
    <!-- Dark mode logo -->
    <a href="https://s2.dev#gh-dark-mode-only">
      <img src="https://raw.githubusercontent.com/s2-streamstore/s2-sdk-rust/main/assets/s2-white.png" height="60">
    </a>
  </p>
  <h1>TypeScript SDK for S2</h1>
  <p>
    <!-- npm -->
    <a href="https://www.npmjs.com/package/@s2-dev/streamstore"><img src="https://img.shields.io/npm/v/@s2-dev/streamstore.svg" alt="npm version" /></a>
    <!-- Discord (chat) -->
    <a href="https://discord.gg/vTCs7kMkAf"><img src="https://img.shields.io/discord/1209937852528599092?logo=discord" /></a>
  </p>
</div>
<p>This repo contains the official TypeScript SDK for <a href="https://s2.dev">S2</a>, a serverless data store for streams, built on the service's <a href="https://s2.dev/docs/rest/protocol">REST API</a>.</p>
<p>S2 is a managed service that provides unlimited, durable streams.</p>
<p>Streams can be appended to, with all new records added to the tail of the stream. You can read from any portion of a stream – indexing by record sequence number, or timestamp – and follow updates live.</p>
<p>See it in action on the <a href="https://s2.dev/playground">playground</a>.</p>
<p><strong>Quick links:</strong></p>
<ul>
<li>Runnable <a href="media/examples">examples</a> directory</li>
<li>Patterns <a href="media/patterns">package</a></li>
<li>SDK <a href="https://s2-streamstore.github.io/s2-sdk-typescript/">documentation</a></li>
<li>S2 REST API <a href="https://s2.dev/docs/rest/protocol">documentation</a></li>
</ul>
<blockquote>
<p><strong>Note:</strong> The repository for releases prior to 0.16.x can be found at this <a href="https://github.com/s2-streamstore/s2-sdk-typescript-old">link</a>.</p>
</blockquote>
<h2 id="install" class="tsd-anchor-link">Install<a href="#install" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><pre><code class="bash"><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">add</span><span class="hl-1"> </span><span class="hl-2">@s2-dev/streamstore</span><br/><span class="hl-3"># or</span><br/><span class="hl-0">yarn</span><span class="hl-1"> </span><span class="hl-2">add</span><span class="hl-1"> </span><span class="hl-2">@s2-dev/streamstore</span><br/><span class="hl-3"># or</span><br/><span class="hl-0">bun</span><span class="hl-1"> </span><span class="hl-2">add</span><span class="hl-1"> </span><span class="hl-2">@s2-dev/streamstore</span>
</code><button type="button">Copy</button></pre>

<h2 id="quick-start" class="tsd-anchor-link">Quick start<a href="#quick-start" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Want to get up and running? Head to the <a href="https://s2.dev/dashboard">S2 dashboard</a> to sign-up and grab an access key, and create a new &quot;basin&quot; from the UI.</p>
<p>Then define the following environment variables respectively:</p>
<pre><code class="bash"><span class="hl-4">export</span><span class="hl-1"> </span><span class="hl-5">S2_ACCESS_TOKEN</span><span class="hl-1">=</span><span class="hl-2">&quot;&lt;token&gt;&quot;</span><br/><span class="hl-4">export</span><span class="hl-1"> </span><span class="hl-5">S2_BASIN</span><span class="hl-1">=</span><span class="hl-2">&quot;&lt;basin&gt;&quot;</span>
</code><button type="button">Copy</button></pre>

<p>From there, you can run the following snippet (or any of the other <a href="media/examples">examples</a>).</p>
<!-- snippet:start quick-start -->
<pre><code class="ts"><span class="hl-6">import</span><span class="hl-1"> {</span><br/><span class="hl-1">	</span><span class="hl-5">AppendAck</span><span class="hl-1">,</span><br/><span class="hl-1">	</span><span class="hl-5">AppendInput</span><span class="hl-1">,</span><br/><span class="hl-1">	</span><span class="hl-5">AppendRecord</span><span class="hl-1">,</span><br/><span class="hl-1">	</span><span class="hl-5">S2</span><span class="hl-1">,</span><br/><span class="hl-1">	</span><span class="hl-5">S2Environment</span><span class="hl-1">,</span><br/><span class="hl-1">} </span><span class="hl-6">from</span><span class="hl-1"> </span><span class="hl-2">&quot;@s2-dev/streamstore&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-7">basinName</span><span class="hl-1"> = </span><span class="hl-5">process</span><span class="hl-1">.</span><span class="hl-5">env</span><span class="hl-1">.</span><span class="hl-7">S2_BASIN</span><span class="hl-1"> ?? </span><span class="hl-2">&quot;my-existing-basin&quot;</span><span class="hl-1">;</span><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-7">streamName</span><span class="hl-1"> = </span><span class="hl-5">process</span><span class="hl-1">.</span><span class="hl-5">env</span><span class="hl-1">.</span><span class="hl-7">S2_STREAM</span><span class="hl-1"> ?? </span><span class="hl-2">&quot;my-new-stream&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-7">s2</span><span class="hl-1"> = </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-0">S2</span><span class="hl-1">({</span><br/><span class="hl-1">	...</span><span class="hl-5">S2Environment</span><span class="hl-1">.</span><span class="hl-0">parse</span><span class="hl-1">(),</span><br/><span class="hl-1">	</span><span class="hl-5">accessToken:</span><span class="hl-1"> </span><span class="hl-5">process</span><span class="hl-1">.</span><span class="hl-5">env</span><span class="hl-1">.</span><span class="hl-7">S2_ACCESS_TOKEN</span><span class="hl-1"> ?? </span><span class="hl-2">&quot;my-access-token&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-3">// Create a basin (namespace) client for basin-level operations.</span><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-7">basin</span><span class="hl-1"> = </span><span class="hl-5">s2</span><span class="hl-1">.</span><span class="hl-0">basin</span><span class="hl-1">(</span><span class="hl-5">basinName</span><span class="hl-1">);</span><br/><br/><span class="hl-3">// Make a new stream within the basin, using the default configuration.</span><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-7">streamResponse</span><span class="hl-1"> = </span><span class="hl-6">await</span><span class="hl-1"> </span><span class="hl-5">basin</span><span class="hl-1">.</span><span class="hl-5">streams</span><span class="hl-1">.</span><span class="hl-0">create</span><span class="hl-1">({ </span><span class="hl-5">stream:</span><span class="hl-1"> </span><span class="hl-5">streamName</span><span class="hl-1"> });</span><br/><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-0">dir</span><span class="hl-1">(</span><span class="hl-5">streamResponse</span><span class="hl-1">, { </span><span class="hl-5">depth:</span><span class="hl-1"> </span><span class="hl-4">null</span><span class="hl-1"> });</span><br/><br/><span class="hl-3">// Create a stream client on our new stream.</span><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-7">stream</span><span class="hl-1"> = </span><span class="hl-5">basin</span><span class="hl-1">.</span><span class="hl-0">stream</span><span class="hl-1">(</span><span class="hl-5">streamName</span><span class="hl-1">);</span><br/><br/><span class="hl-3">// Make a single append call.</span><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-7">append</span><span class="hl-1">: </span><span class="hl-8">Promise</span><span class="hl-1">&lt;</span><span class="hl-8">AppendAck</span><span class="hl-1">&gt; = </span><span class="hl-5">stream</span><span class="hl-1">.</span><span class="hl-0">append</span><span class="hl-1">(</span><br/><span class="hl-1">	</span><span class="hl-3">// `append` expects an input batch of one or many records.</span><br/><span class="hl-1">	</span><span class="hl-5">AppendInput</span><span class="hl-1">.</span><span class="hl-0">create</span><span class="hl-1">([</span><br/><span class="hl-1">		</span><span class="hl-3">// Records can use a string encoding...</span><br/><span class="hl-1">		</span><span class="hl-5">AppendRecord</span><span class="hl-1">.</span><span class="hl-0">string</span><span class="hl-1">({</span><br/><span class="hl-1">			</span><span class="hl-5">body:</span><span class="hl-1"> </span><span class="hl-2">&quot;Hello from the docs snippet!&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">			</span><span class="hl-5">headers:</span><span class="hl-1"> [[</span><span class="hl-2">&quot;content-type&quot;</span><span class="hl-1">, </span><span class="hl-2">&quot;text/plain&quot;</span><span class="hl-1">]],</span><br/><span class="hl-1">		}),</span><br/><span class="hl-1">		</span><span class="hl-3">// ...or contain raw binary data.</span><br/><span class="hl-1">		</span><span class="hl-5">AppendRecord</span><span class="hl-1">.</span><span class="hl-0">bytes</span><span class="hl-1">({</span><br/><span class="hl-1">			</span><span class="hl-5">body:</span><span class="hl-1"> </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-0">TextEncoder</span><span class="hl-1">().</span><span class="hl-0">encode</span><span class="hl-1">(</span><span class="hl-2">&quot;Bytes payload&quot;</span><span class="hl-1">),</span><br/><span class="hl-1">		}),</span><br/><span class="hl-1">	]),</span><br/><span class="hl-1">);</span><br/><br/><span class="hl-3">// When the promise resolves, the data is fully durable and present on the stream.</span><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-7">ack</span><span class="hl-1"> = </span><span class="hl-6">await</span><span class="hl-1"> </span><span class="hl-5">append</span><span class="hl-1">;</span><br/><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><br/><span class="hl-1">	</span><span class="hl-2">`Appended records </span><span class="hl-4">${</span><span class="hl-5">ack</span><span class="hl-9">.</span><span class="hl-5">start</span><span class="hl-9">.</span><span class="hl-5">seqNum</span><span class="hl-4">}</span><span class="hl-2"> through </span><span class="hl-4">${</span><span class="hl-5">ack</span><span class="hl-9">.</span><span class="hl-5">end</span><span class="hl-9">.</span><span class="hl-5">seqNum</span><span class="hl-4">}</span><span class="hl-2"> (exclusive).`</span><span class="hl-1">,</span><br/><span class="hl-1">);</span><br/><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-0">dir</span><span class="hl-1">(</span><span class="hl-5">ack</span><span class="hl-1">, { </span><span class="hl-5">depth:</span><span class="hl-1"> </span><span class="hl-4">null</span><span class="hl-1"> });</span><br/><br/><span class="hl-3">// Read the two records back as binary.</span><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-7">batch</span><span class="hl-1"> = </span><span class="hl-6">await</span><span class="hl-1"> </span><span class="hl-5">stream</span><span class="hl-1">.</span><span class="hl-0">read</span><span class="hl-1">(</span><br/><span class="hl-1">	{</span><br/><span class="hl-1">		</span><span class="hl-5">start:</span><span class="hl-1"> { </span><span class="hl-5">from:</span><span class="hl-1"> { </span><span class="hl-5">seqNum:</span><span class="hl-1"> </span><span class="hl-5">ack</span><span class="hl-1">.</span><span class="hl-5">start</span><span class="hl-1">.</span><span class="hl-5">seqNum</span><span class="hl-1"> } },</span><br/><span class="hl-1">		</span><span class="hl-5">stop:</span><span class="hl-1"> { </span><span class="hl-5">limits:</span><span class="hl-1"> { </span><span class="hl-5">count:</span><span class="hl-1"> </span><span class="hl-10">2</span><span class="hl-1"> } },</span><br/><span class="hl-1">	},</span><br/><span class="hl-1">	{ </span><span class="hl-5">as:</span><span class="hl-1"> </span><span class="hl-2">&quot;bytes&quot;</span><span class="hl-1"> },</span><br/><span class="hl-1">);</span><br/><br/><span class="hl-6">for</span><span class="hl-1"> (</span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-7">record</span><span class="hl-1"> </span><span class="hl-4">of</span><span class="hl-1"> </span><span class="hl-5">batch</span><span class="hl-1">.</span><span class="hl-5">records</span><span class="hl-1">) {</span><br/><span class="hl-1">	</span><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-0">dir</span><span class="hl-1">(</span><span class="hl-5">record</span><span class="hl-1">, { </span><span class="hl-5">depth:</span><span class="hl-1"> </span><span class="hl-4">null</span><span class="hl-1"> });</span><br/><span class="hl-1">	</span><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&quot;decoded body: %s&quot;</span><span class="hl-1">, </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-0">TextDecoder</span><span class="hl-1">().</span><span class="hl-0">decode</span><span class="hl-1">(</span><span class="hl-5">record</span><span class="hl-1">.</span><span class="hl-5">body</span><span class="hl-1">));</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<!-- snippet:end quick-start -->
<h2 id="development" class="tsd-anchor-link">Development<a href="#development" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Run examples:</p>
<pre><code class="bash"><span class="hl-4">export</span><span class="hl-1"> </span><span class="hl-5">S2_ACCESS_TOKEN</span><span class="hl-1">=</span><span class="hl-2">&quot;&lt;token&gt;&quot;</span><br/><span class="hl-4">export</span><span class="hl-1"> </span><span class="hl-5">S2_BASIN</span><span class="hl-1">=</span><span class="hl-2">&quot;&lt;basin&gt;&quot;</span><br/><span class="hl-4">export</span><span class="hl-1"> </span><span class="hl-5">S2_STREAM</span><span class="hl-1">=</span><span class="hl-2">&quot;&lt;stream&gt;&quot;</span><span class="hl-1"> </span><span class="hl-3"># optional per example</span><br/><span class="hl-0">npx</span><span class="hl-1"> </span><span class="hl-2">tsx</span><span class="hl-1"> </span><span class="hl-2">examples/</span><span class="hl-1">&lt;</span><span class="hl-2">exampl</span><span class="hl-1">e&gt;</span><span class="hl-2">.ts</span>
</code><button type="button">Copy</button></pre>

<p>Run tests:</p>
<pre><code class="bash"><span class="hl-0">bun</span><span class="hl-1"> </span><span class="hl-2">run</span><span class="hl-1"> </span><span class="hl-2">test</span>
</code><button type="button">Copy</button></pre>

<p>The SDK also ships with a basic browser example, to experiment with using the SDK directly from the web.</p>
<pre><code class="bash"><span class="hl-0">bun</span><span class="hl-1"> </span><span class="hl-2">run</span><span class="hl-1"> </span><span class="hl-4">--cwd</span><span class="hl-1"> </span><span class="hl-2">packages/streamstore</span><span class="hl-1"> </span><span class="hl-2">example:browser</span>
</code><button type="button">Copy</button></pre>

<h2 id="using-s2" class="tsd-anchor-link">Using S2<a href="#using-s2" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>S2 SDKs, including this TypeScript one, provide high-level abstractions and conveniences over the core <a href="https://s2.dev/docs/rest/protocol">REST API</a>.</p>
<h3 id="account-and-basin-operations" class="tsd-anchor-link">Account and basin operations<a href="#account-and-basin-operations" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>The account and basin APIs allow for CRUD ops on basins (namespaces of streams), streams, granular access tokens, and more.</p>
<h3 id="data-plane-stream-operations" class="tsd-anchor-link">Data plane (stream) operations<a href="#data-plane-stream-operations" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>The core SDK verbs are around appending data to streams, reading data from them.</p>
<p>See the examples and documentation for more details.</p>
<p>Below are some high level notes on how to interact with the data plane.</p>
<h4 id="appends" class="tsd-anchor-link">Appends<a href="#appends" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><p>The atomic unit of append is an <code>AppendInput</code>, which contains a batch of <code>AppendRecord</code>s and some optional additional parameters.</p>
<p>Records contain a body and optional headers. After an append completes, each record will be assigned a sequence number (and a timestamp).</p>
<!-- snippet:start data-plane-unary -->
<pre><code class="ts"><span class="hl-3">// Append a mixed batch: string + bytes with headers.</span><br/><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&quot;Appending two records (string + bytes).&quot;</span><span class="hl-1">);</span><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-7">mixedAck</span><span class="hl-1"> = </span><span class="hl-6">await</span><span class="hl-1"> </span><span class="hl-5">stream</span><span class="hl-1">.</span><span class="hl-0">append</span><span class="hl-1">(</span><br/><span class="hl-1">	</span><span class="hl-5">AppendInput</span><span class="hl-1">.</span><span class="hl-0">create</span><span class="hl-1">([</span><br/><span class="hl-1">		</span><span class="hl-5">AppendRecord</span><span class="hl-1">.</span><span class="hl-0">string</span><span class="hl-1">({</span><br/><span class="hl-1">			</span><span class="hl-5">body:</span><span class="hl-1"> </span><span class="hl-2">&quot;string payload&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">			</span><span class="hl-5">headers:</span><span class="hl-1"> [</span><br/><span class="hl-1">				[</span><span class="hl-2">&quot;record-type&quot;</span><span class="hl-1">, </span><span class="hl-2">&quot;example&quot;</span><span class="hl-1">],</span><br/><span class="hl-1">				[</span><span class="hl-2">&quot;user-id&quot;</span><span class="hl-1">, </span><span class="hl-2">&quot;123&quot;</span><span class="hl-1">],</span><br/><span class="hl-1">			],</span><br/><span class="hl-1">		}),</span><br/><span class="hl-1">		</span><span class="hl-5">AppendRecord</span><span class="hl-1">.</span><span class="hl-0">bytes</span><span class="hl-1">({</span><br/><span class="hl-1">			</span><span class="hl-5">body:</span><span class="hl-1"> </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-0">TextEncoder</span><span class="hl-1">().</span><span class="hl-0">encode</span><span class="hl-1">(</span><span class="hl-2">&quot;bytes payload&quot;</span><span class="hl-1">),</span><br/><span class="hl-1">			</span><span class="hl-5">headers:</span><span class="hl-1"> [[</span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-0">Uint8Array</span><span class="hl-1">([</span><span class="hl-10">1</span><span class="hl-1">, </span><span class="hl-10">2</span><span class="hl-1">, </span><span class="hl-10">3</span><span class="hl-1">]), </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-0">Uint8Array</span><span class="hl-1">([</span><span class="hl-10">4</span><span class="hl-1">, </span><span class="hl-10">5</span><span class="hl-1">, </span><span class="hl-10">6</span><span class="hl-1">])]],</span><br/><span class="hl-1">		}),</span><br/><span class="hl-1">	]),</span><br/><span class="hl-1">);</span><br/><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-0">dir</span><span class="hl-1">(</span><span class="hl-5">mixedAck</span><span class="hl-1">, { </span><span class="hl-5">depth:</span><span class="hl-1"> </span><span class="hl-4">null</span><span class="hl-1"> });</span>
</code><button type="button">Copy</button></pre>

<!-- snippet:end data-plane-unary -->
<h3 id="append-sessions-ordered-stateful-appends" class="tsd-anchor-link">Append sessions (ordered, stateful appends)<a href="#append-sessions-ordered-stateful-appends" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Use an <code>AppendSession</code> when you want higher throughput and ordering guarantees:</p>
<ul>
<li>It is stateful and enforces that the order you submit batches becomes the order on the stream.</li>
<li>It supports pipelining submissions while still preserving ordering (especially with the <code>s2s</code> transport).</li>
</ul>
<!-- snippet:start data-plane-append-session -->
<pre><code class="ts"><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&quot;Opening appendSession with maxInflightBytes=1MiB.&quot;</span><span class="hl-1">);</span><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-7">appendSession</span><span class="hl-1"> = </span><span class="hl-6">await</span><span class="hl-1"> </span><span class="hl-5">stream</span><span class="hl-1">.</span><span class="hl-0">appendSession</span><span class="hl-1">({</span><br/><span class="hl-1">	</span><span class="hl-3">// This determines the maximum amount of unacknowledged, pending appends,</span><br/><span class="hl-1">	</span><span class="hl-3">// which can be outstanding at any given time. This is used to apply backpressure.</span><br/><span class="hl-1">	</span><span class="hl-5">maxInflightBytes:</span><span class="hl-1"> </span><span class="hl-10">1024</span><span class="hl-1"> * </span><span class="hl-10">1024</span><span class="hl-1">,</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-7">startSeq</span><span class="hl-1"> = </span><span class="hl-5">mixedAck</span><span class="hl-1">.</span><span class="hl-5">end</span><span class="hl-1">.</span><span class="hl-5">seqNum</span><span class="hl-1">;</span><br/><span class="hl-3">// Submit an append batch.</span><br/><span class="hl-3">// This returns a promise that resolves into a `BatchSubmitTicket` once the session has</span><br/><span class="hl-3">// capacity to send it.</span><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-7">append1</span><span class="hl-1">: </span><span class="hl-8">BatchSubmitTicket</span><span class="hl-1"> = </span><span class="hl-6">await</span><span class="hl-1"> </span><span class="hl-5">appendSession</span><span class="hl-1">.</span><span class="hl-0">submit</span><span class="hl-1">(</span><br/><span class="hl-1">	</span><span class="hl-5">AppendInput</span><span class="hl-1">.</span><span class="hl-0">create</span><span class="hl-1">([</span><br/><span class="hl-1">		</span><span class="hl-5">AppendRecord</span><span class="hl-1">.</span><span class="hl-0">string</span><span class="hl-1">({ </span><span class="hl-5">body:</span><span class="hl-1"> </span><span class="hl-2">&quot;session record A&quot;</span><span class="hl-1"> }),</span><br/><span class="hl-1">		</span><span class="hl-5">AppendRecord</span><span class="hl-1">.</span><span class="hl-0">string</span><span class="hl-1">({ </span><span class="hl-5">body:</span><span class="hl-1"> </span><span class="hl-2">&quot;session record B&quot;</span><span class="hl-1"> }),</span><br/><span class="hl-1">	]),</span><br/><span class="hl-1">);</span><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-7">append2</span><span class="hl-1">: </span><span class="hl-8">BatchSubmitTicket</span><span class="hl-1"> = </span><span class="hl-6">await</span><span class="hl-1"> </span><span class="hl-5">appendSession</span><span class="hl-1">.</span><span class="hl-0">submit</span><span class="hl-1">(</span><br/><span class="hl-1">	</span><span class="hl-5">AppendInput</span><span class="hl-1">.</span><span class="hl-0">create</span><span class="hl-1">([</span><span class="hl-5">AppendRecord</span><span class="hl-1">.</span><span class="hl-0">string</span><span class="hl-1">({ </span><span class="hl-5">body:</span><span class="hl-1"> </span><span class="hl-2">&quot;session record C&quot;</span><span class="hl-1"> })]),</span><br/><span class="hl-1">);</span><br/><br/><span class="hl-3">// The tickets can be used to wait for the append to become durable (acknowledged by S2).</span><br/><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-0">dir</span><span class="hl-1">(</span><span class="hl-6">await</span><span class="hl-1"> </span><span class="hl-5">append1</span><span class="hl-1">.</span><span class="hl-0">ack</span><span class="hl-1">(), { </span><span class="hl-5">depth:</span><span class="hl-1"> </span><span class="hl-4">null</span><span class="hl-1"> });</span><br/><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-0">dir</span><span class="hl-1">(</span><span class="hl-6">await</span><span class="hl-1"> </span><span class="hl-5">append2</span><span class="hl-1">.</span><span class="hl-0">ack</span><span class="hl-1">(), { </span><span class="hl-5">depth:</span><span class="hl-1"> </span><span class="hl-4">null</span><span class="hl-1"> });</span><br/><br/><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&quot;Closing append session to flush outstanding batches.&quot;</span><span class="hl-1">);</span><br/><span class="hl-6">await</span><span class="hl-1"> </span><span class="hl-5">appendSession</span><span class="hl-1">.</span><span class="hl-0">close</span><span class="hl-1">();</span>
</code><button type="button">Copy</button></pre>

<!-- snippet:end data-plane-append-session -->
<h3 id="producer" class="tsd-anchor-link">Producer<a href="#producer" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Streams can support up to 200 appended batches per second (per single stream), but tens of MiB/second.</p>
<p>For throughput, you typically want fewer, but larger batches.</p>
<p>The <code>Producer</code> API simplifies this by connecting an <code>appendSession</code> with an auto-batcher (via <code>BatchTransform</code>), which lingers and accumulates records for a configurable amount of time. This is the recommended path for most high-throughput writers.</p>
<!-- snippet:start producer-core -->
<pre><code class="ts"><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-7">producer</span><span class="hl-1"> = </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-0">Producer</span><span class="hl-1">(</span><br/><span class="hl-1">	</span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-0">BatchTransform</span><span class="hl-1">({</span><br/><span class="hl-1">		</span><span class="hl-3">// Linger and collect new records for up to 25ms per batch.</span><br/><span class="hl-1">		</span><span class="hl-5">lingerDurationMillis:</span><span class="hl-1"> </span><span class="hl-10">25</span><span class="hl-1">,</span><br/><span class="hl-1">		</span><span class="hl-5">maxBatchRecords:</span><span class="hl-1"> </span><span class="hl-10">200</span><span class="hl-1">,</span><br/><span class="hl-1">	}),</span><br/><span class="hl-1">	</span><span class="hl-6">await</span><span class="hl-1"> </span><span class="hl-5">stream</span><span class="hl-1">.</span><span class="hl-0">appendSession</span><span class="hl-1">(),</span><br/><span class="hl-1">);</span><br/><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-7">tickets</span><span class="hl-1"> = [];</span><br/><span class="hl-6">for</span><span class="hl-1"> (</span><span class="hl-4">let</span><span class="hl-1"> </span><span class="hl-5">i</span><span class="hl-1"> = </span><span class="hl-10">0</span><span class="hl-1">; </span><span class="hl-5">i</span><span class="hl-1"> &lt; </span><span class="hl-10">10</span><span class="hl-1">; </span><span class="hl-5">i</span><span class="hl-1"> += </span><span class="hl-10">1</span><span class="hl-1">) {</span><br/><span class="hl-1">	</span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-7">ticket</span><span class="hl-1"> = </span><span class="hl-6">await</span><span class="hl-1"> </span><span class="hl-5">producer</span><span class="hl-1">.</span><span class="hl-0">submit</span><span class="hl-1">(</span><br/><span class="hl-1">		</span><span class="hl-5">AppendRecord</span><span class="hl-1">.</span><span class="hl-0">string</span><span class="hl-1">({</span><br/><span class="hl-1">			</span><span class="hl-5">body:</span><span class="hl-1"> </span><span class="hl-2">`record-</span><span class="hl-4">${</span><span class="hl-5">i</span><span class="hl-4">}</span><span class="hl-2">`</span><span class="hl-1">,</span><br/><span class="hl-1">		}),</span><br/><span class="hl-1">	);</span><br/><span class="hl-1">	</span><span class="hl-5">tickets</span><span class="hl-1">.</span><span class="hl-0">push</span><span class="hl-1">(</span><span class="hl-5">ticket</span><span class="hl-1">);</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-7">acks</span><span class="hl-1"> = </span><span class="hl-6">await</span><span class="hl-1"> </span><span class="hl-8">Promise</span><span class="hl-1">.</span><span class="hl-0">all</span><span class="hl-1">(</span><span class="hl-5">tickets</span><span class="hl-1">.</span><span class="hl-0">map</span><span class="hl-1">((</span><span class="hl-5">ticket</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><span class="hl-5">ticket</span><span class="hl-1">.</span><span class="hl-0">ack</span><span class="hl-1">()));</span><br/><span class="hl-6">for</span><span class="hl-1"> (</span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-7">ack</span><span class="hl-1"> </span><span class="hl-4">of</span><span class="hl-1"> </span><span class="hl-5">acks</span><span class="hl-1">) {</span><br/><span class="hl-1">	</span><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&quot;Record durable at seqNum:&quot;</span><span class="hl-1">, </span><span class="hl-5">ack</span><span class="hl-1">.</span><span class="hl-0">seqNum</span><span class="hl-1">());</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-3">// Use the seqNum of the third ack as a coordinate for reading it back.</span><br/><span class="hl-4">let</span><span class="hl-1"> </span><span class="hl-5">record3</span><span class="hl-1"> = </span><span class="hl-6">await</span><span class="hl-1"> </span><span class="hl-5">stream</span><span class="hl-1">.</span><span class="hl-0">read</span><span class="hl-1">({</span><br/><span class="hl-1">	</span><span class="hl-5">start:</span><span class="hl-1"> { </span><span class="hl-5">from:</span><span class="hl-1"> { </span><span class="hl-5">seqNum:</span><span class="hl-1"> </span><span class="hl-5">acks</span><span class="hl-1">[</span><span class="hl-10">3</span><span class="hl-1">].</span><span class="hl-0">seqNum</span><span class="hl-1">() } },</span><br/><span class="hl-1">	</span><span class="hl-5">stop:</span><span class="hl-1"> { </span><span class="hl-5">limits:</span><span class="hl-1"> { </span><span class="hl-5">count:</span><span class="hl-1"> </span><span class="hl-10">1</span><span class="hl-1"> } },</span><br/><span class="hl-1">});</span><br/><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-0">dir</span><span class="hl-1">(</span><span class="hl-5">record3</span><span class="hl-1">, { </span><span class="hl-5">depth:</span><span class="hl-1"> </span><span class="hl-4">null</span><span class="hl-1"> });</span><br/><br/><span class="hl-6">await</span><span class="hl-1"> </span><span class="hl-5">producer</span><span class="hl-1">.</span><span class="hl-0">close</span><span class="hl-1">();</span><br/><span class="hl-6">await</span><span class="hl-1"> </span><span class="hl-5">stream</span><span class="hl-1">.</span><span class="hl-0">close</span><span class="hl-1">();</span>
</code><button type="button">Copy</button></pre>

<!-- snippet:end producer-core -->
<h3 id="read-sessions" class="tsd-anchor-link">Read sessions<a href="#read-sessions" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Read operations, similarly, can be done via individual <code>read</code> calls, or via a <code>readSession</code>.</p>
<p>Use a session whenever you want:</p>
<ul>
<li>to read more than a single response batch (responses larger than 1 MiB),</li>
<li>to keep a session open and tail for new data (omit stop criteria).</li>
</ul>
<!-- snippet:start read-session-core -->
<pre><code class="ts"><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-7">readSession</span><span class="hl-1"> = </span><span class="hl-6">await</span><span class="hl-1"> </span><span class="hl-5">stream</span><span class="hl-1">.</span><span class="hl-0">readSession</span><span class="hl-1">({</span><br/><span class="hl-1">	</span><span class="hl-5">start:</span><span class="hl-1"> { </span><span class="hl-5">from:</span><span class="hl-1"> { </span><span class="hl-5">tailOffset:</span><span class="hl-1"> </span><span class="hl-10">10</span><span class="hl-1"> }, </span><span class="hl-5">clamp:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1"> },</span><br/><span class="hl-1">	</span><span class="hl-5">stop:</span><span class="hl-1"> { </span><span class="hl-5">waitSecs:</span><span class="hl-1"> </span><span class="hl-10">10</span><span class="hl-1"> },</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-6">for</span><span class="hl-1"> </span><span class="hl-6">await</span><span class="hl-1"> (</span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-7">record</span><span class="hl-1"> </span><span class="hl-4">of</span><span class="hl-1"> </span><span class="hl-5">readSession</span><span class="hl-1">) {</span><br/><span class="hl-1">	</span><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-5">record</span><span class="hl-1">.</span><span class="hl-5">seqNum</span><span class="hl-1">, </span><span class="hl-5">record</span><span class="hl-1">.</span><span class="hl-5">body</span><span class="hl-1">);</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<!-- snippet:end read-session-core -->
<h2 id="client-configuration" class="tsd-anchor-link">Client configuration<a href="#client-configuration" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><h3 id="retries-and-append-retry-policy" class="tsd-anchor-link">Retries and append retry policy<a href="#retries-and-append-retry-policy" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><!-- snippet:start client-config -->
<pre><code class="ts"><span class="hl-6">import</span><span class="hl-1"> { </span><span class="hl-5">S2</span><span class="hl-1">, </span><span class="hl-5">S2Environment</span><span class="hl-1">, </span><span class="hl-5">S2Error</span><span class="hl-1"> } </span><span class="hl-6">from</span><span class="hl-1"> </span><span class="hl-2">&quot;@s2-dev/streamstore&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-7">accessToken</span><span class="hl-1"> = </span><span class="hl-5">process</span><span class="hl-1">.</span><span class="hl-5">env</span><span class="hl-1">.</span><span class="hl-7">S2_ACCESS_TOKEN</span><span class="hl-1">;</span><br/><span class="hl-6">if</span><span class="hl-1"> (!</span><span class="hl-5">accessToken</span><span class="hl-1">) {</span><br/><span class="hl-1">	</span><span class="hl-6">throw</span><span class="hl-1"> </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-0">Error</span><span class="hl-1">(</span><span class="hl-2">&quot;Set S2_ACCESS_TOKEN to configure the SDK.&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-7">basinName</span><span class="hl-1"> = </span><span class="hl-5">process</span><span class="hl-1">.</span><span class="hl-5">env</span><span class="hl-1">.</span><span class="hl-7">S2_BASIN</span><span class="hl-1">;</span><br/><span class="hl-6">if</span><span class="hl-1"> (!</span><span class="hl-5">basinName</span><span class="hl-1">) {</span><br/><span class="hl-1">	</span><span class="hl-6">throw</span><span class="hl-1"> </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-0">Error</span><span class="hl-1">(</span><span class="hl-2">&quot;Set S2_BASIN so we know which basin to inspect.&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-7">streamName</span><span class="hl-1"> = </span><span class="hl-5">process</span><span class="hl-1">.</span><span class="hl-5">env</span><span class="hl-1">.</span><span class="hl-7">S2_STREAM</span><span class="hl-1"> ?? </span><span class="hl-2">&quot;docs/client-config&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-3">// Global retry config applies to every stream/append/read session created via this client.</span><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-7">s2</span><span class="hl-1"> = </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-0">S2</span><span class="hl-1">({</span><br/><span class="hl-1">	...</span><span class="hl-5">S2Environment</span><span class="hl-1">.</span><span class="hl-0">parse</span><span class="hl-1">(),</span><br/><span class="hl-1">	</span><span class="hl-5">accessToken</span><span class="hl-1">,</span><br/><span class="hl-1">	</span><span class="hl-5">retry:</span><span class="hl-1"> {</span><br/><span class="hl-1">		</span><span class="hl-5">maxAttempts:</span><span class="hl-1"> </span><span class="hl-10">3</span><span class="hl-1">,</span><br/><span class="hl-1">		</span><span class="hl-5">minBaseDelayMillis:</span><span class="hl-1"> </span><span class="hl-10">100</span><span class="hl-1">,</span><br/><span class="hl-1">		</span><span class="hl-5">maxBaseDelayMillis:</span><span class="hl-1"> </span><span class="hl-10">500</span><span class="hl-1">,</span><br/><span class="hl-1">		</span><span class="hl-5">appendRetryPolicy:</span><span class="hl-1"> </span><span class="hl-2">&quot;all&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">		</span><span class="hl-5">requestTimeoutMillis:</span><span class="hl-1"> </span><span class="hl-10">5_000</span><span class="hl-1">,</span><br/><span class="hl-1">	},</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-7">basin</span><span class="hl-1"> = </span><span class="hl-5">s2</span><span class="hl-1">.</span><span class="hl-0">basin</span><span class="hl-1">(</span><span class="hl-5">basinName</span><span class="hl-1">);</span><br/><span class="hl-6">await</span><span class="hl-1"> </span><span class="hl-5">basin</span><span class="hl-1">.</span><span class="hl-5">streams</span><span class="hl-1">.</span><span class="hl-0">create</span><span class="hl-1">({ </span><span class="hl-5">stream:</span><span class="hl-1"> </span><span class="hl-5">streamName</span><span class="hl-1"> }).</span><span class="hl-0">catch</span><span class="hl-1">((</span><span class="hl-5">error</span><span class="hl-1">: </span><span class="hl-8">unknown</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">	</span><span class="hl-6">if</span><span class="hl-1"> (!(</span><span class="hl-5">error</span><span class="hl-1"> </span><span class="hl-4">instanceof</span><span class="hl-1"> </span><span class="hl-8">S2Error</span><span class="hl-1"> &amp;&amp; </span><span class="hl-5">error</span><span class="hl-1">.</span><span class="hl-5">status</span><span class="hl-1"> === </span><span class="hl-10">409</span><span class="hl-1">)) {</span><br/><span class="hl-1">		</span><span class="hl-6">throw</span><span class="hl-1"> </span><span class="hl-5">error</span><span class="hl-1">;</span><br/><span class="hl-1">	}</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-7">stream</span><span class="hl-1"> = </span><span class="hl-5">basin</span><span class="hl-1">.</span><span class="hl-0">stream</span><span class="hl-1">(</span><span class="hl-5">streamName</span><span class="hl-1">);</span><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-7">tail</span><span class="hl-1"> = </span><span class="hl-6">await</span><span class="hl-1"> </span><span class="hl-5">stream</span><span class="hl-1">.</span><span class="hl-0">checkTail</span><span class="hl-1">();</span><br/><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&quot;Tail info:&quot;</span><span class="hl-1">);</span><br/><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-0">dir</span><span class="hl-1">(</span><span class="hl-5">tail</span><span class="hl-1">, { </span><span class="hl-5">depth:</span><span class="hl-1"> </span><span class="hl-4">null</span><span class="hl-1"> });</span>
</code><button type="button">Copy</button></pre>

<!-- snippet:end client-config -->
<ul>
<li><code>appendRetryPolicy: &quot;noSideEffects&quot;</code> only retries appends that are naturally idempotent via <code>matchSeqNum</code>.</li>
<li><code>appendRetryPolicy: &quot;all&quot;</code> can retry any failure (higher durability, but can duplicate data without idempotency).</li>
</ul>
<h3 id="session-transports" class="tsd-anchor-link">Session transports<a href="#session-transports" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Sessions can use either:</p>
<ul>
<li><code>fetch</code> (HTTP/1.1)</li>
<li><code>s2s</code> (S2’s streaming protocol over HTTP/2)</li>
</ul>
<p>You can force a transport per stream:</p>
<!-- snippet:start force-transport -->
<pre><code class="ts"><span class="hl-3">// Override the automatic transport detection to force the fetch transport.</span><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-7">stream</span><span class="hl-1"> = </span><span class="hl-5">basin</span><span class="hl-1">.</span><span class="hl-0">stream</span><span class="hl-1">(</span><span class="hl-5">streamName</span><span class="hl-1">, {</span><br/><span class="hl-1">	</span><span class="hl-5">forceTransport:</span><span class="hl-1"> </span><span class="hl-2">&quot;s2s&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<!-- snippet:end force-transport -->
<h2 id="patterns" class="tsd-anchor-link">Patterns<a href="#patterns" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>For higher-level, more opinionated building blocks (typed append/read sessions, framing, dedupe helpers), see the <a href="media/README.md">patterns</a> package.</p>
<h2 id="feedback" class="tsd-anchor-link">Feedback<a href="#feedback" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>We use <a href="https://github.com/s2-streamstore/s2-sdk-typescript/issues">Github Issues</a> to
track feature requests and issues with the SDK. If you wish to provide feedback,
report a bug or request a feature, feel free to open a Github issue.</p>
<h2 id="reach-out-to-us" class="tsd-anchor-link">Reach out to us<a href="#reach-out-to-us" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Join our <a href="https://discord.gg/vTCs7kMkAf">Discord</a> server. We would love to hear
from you.</p>
<p>You can also email us at <a href="mailto:hi@s2.dev">hi@s2.dev</a>.</p>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-chevronDown"></use></svg><h3>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-chevronDown"></use></svg><h3>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#install"><span>Install</span></a><a href="#quick-start"><span>Quick start</span></a><a href="#development"><span>Development</span></a><a href="#using-s2"><span>Using <wbr/>S2</span></a><ul><li><a href="#account-and-basin-operations"><span>Account and basin operations</span></a></li><li><a href="#data-plane-stream-operations"><span>Data plane (stream) operations</span></a></li><li><ul><li><a href="#appends"><span>Appends</span></a></li></ul></li><li><a href="#append-sessions-ordered-stateful-appends"><span>Append sessions (ordered, stateful appends)</span></a></li><li><a href="#producer"><span>Producer</span></a></li><li><a href="#read-sessions"><span>Read sessions</span></a></li></ul><a href="#client-configuration"><span>Client configuration</span></a><ul><li><a href="#retries-and-append-retry-policy"><span>Retries and append retry policy</span></a></li><li><a href="#session-transports"><span>Session transports</span></a></li></ul><a href="#patterns"><span>Patterns</span></a><a href="#feedback"><span>Feedback</span></a><a href="#reach-out-to-us"><span>Reach out to us</span></a></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="modules.html">@s2-dev/streamstore - v0.22.2</a><ul class="tsd-small-nested-navigation" id="tsd-nav-container"><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>
